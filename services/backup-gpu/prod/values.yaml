bitwardenIds:

seaweedfs-csi-driver:
  seaweedfsFiler: "seaweedfs-filer.infra.spencerslab.com:8880,seaweedfs-filer.infra.spencerslab.com:8881,seaweedfs-filer.infra.spencerslab.com:8882,seaweedfs-filer.infra.spencerslab.com:8883,seaweedfs-filer.infra.spencerslab.com:8884"

domain: OVERRIDE_VIA_APPSET
clusterName: OVERRIDE_VIA_APPSET

ingress:
  subdomains:
    player.cherry:
      serviceName: player.cherry
      service: backup-gpu-jellyfin
      port: 8080

    stash.cherry:
      serviceName: stash.cherry
      service: backup-gpu-stash
      port: 8080

    stasharr.cherry:
      serviceName: stasharr
      service: backup-gpu-stasharr
      port: 8686

    # Prowlarr works but not trackers?
    trackers:
      serviceName: prowlarr
      service: backup-gpu-prowlarr
      port: 9696

    whisparr.cherry:
      serviceName: whisparr
      service: backup-gpu-whisparr
      port: 7878

    # 4k links aren't enabled.
    whisparr-4k.cherry:
      serviceName: whisparr-4k
      #service: media-radarr-4k
      service: backup-gpu-whisparr
      port: 7878

    namarr.cherry:
      serviceName: namer
      service: backup-gpu-namer
      port: 8080

    funscript-player.cherry:
      serviceName: funscript-player
      service: backup-gpu-funscript-player
      port: 8080

    beadi.cherry:
      serviceName: beadi
      service: backup-gpu-beadi
      port: 8080

    #unpack:
    #  serviceName: unpackerr
    #  service: media-unpackerr
    #  port: ????

    cluster:
      clusterBase: true
      service: base-argocd-server
      port: 80
    traefik:
      clusterBase: true
      namespace: kube-system
      service: traefik
      port: 80

jellyfin:
  global:
    nameOverride: jellyfin
  controllers:
    jellyfin:
      pod:
        securityContext:
          runAsUser: 1000
          # Using gid 2000 as "shared" group.
          runAsGroup: 2000
          fsGroup: 1000
          fsGroupChangePolicy: OnRootMismatch
          supplementalGroups:
            - 44 # video
            - 109 # render
            - 105
            - 568
            - 1000
            - 2000
      containers:
        app:
          image:
            repository: jellyfin/jellyfin
            tag: 10.10.7@sha256:7ae36aab93ef9b6aaff02b37f8bb23df84bb2d7a3f6054ec8fc466072a648ce2
          env:
            TZ: America/Denver
            JELLYFIN_DATA_DIR: /config/data
            JELLYFIN_CONFIG_DIR: /config
            #JELLYFIN_PublishedServerUrl: https://jellyfin.$.Values.domain
            #DOTNET_SYSTEM_IO_DISABLEFILELOCKING: "true"
            #JELLYFIN_FFmpeg__probesize: "50000000"
            #JELLYFIN_FFmpeg__analyzeduration: "50000000"
  service:
    app:
      controller: jellyfin
      type: ClusterIP
      ports:
        http:
          port: 8096
  persistence:
    config:
      existingClaim: jellyfin
    share:
      existingClaim: jellyfin-share
    media:
      existingClaim: media
