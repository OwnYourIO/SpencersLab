mosquitto: 
  ingress:
    main:
      hosts:
        # Specify external host name
        - host: mqtt.spencerslab.com
          paths:
            - path: "/"
              pathType: Prefix
generic-device-plugin:
  app-template:
    configMaps:
      config:
        enabled: true
        data:
          devices.yaml: |-
            devices:
              - name: zigbee
                groups:
                  - paths:
                      - path: /dev/ttyUSB1
              - name: zwave
                groups:
                  - paths:
                      - path: /dev/ttyUSB0
zigbee2mqtt:
  bitwardenIds:
    zigbee2mqtt: 0164cfbc-dd85-43af-a4cc-b13f00108bde
  app-template:
    controllers:
      zigbee2mqtt:
        containers:
          main:
            env:
              TZ: America/Denver
              #DEBUG: zigbee-herdsman*
              #ZIGBEE2MQTT_CONFIG_ADVANCED_LOG_LEVEL: debug
              ZIGBEE2MQTT_CONFIG_FRONTEND_URL: https://zigbee2mqtt.spencerslab.com
              ZIGBEE2MQTT_CONFIG_MQTT_SERVER: mqtt://home.spencerslab.com
              ZIGBEE2MQTT_CONFIG_MQTT_VERSION: 4
              ZIGBEE2MQTT_CONFIG_SERIAL_BAUDRATE: 57600
              ZIGBEE2MQTT_CONFIG_SERIAL_PORT: /dev/ttyUSB1
              ZIGBEE2MQTT_CONFIG_SERIAL_ADAPTER: ezsp
    ingress:
      zigbee2mqtt:
        annotations:
          hajimari.io/url: https://zigbee2mqtt.spencerslab.com
        hosts:
          - host: &host "zigbee2mqtt.spencerslab.com"
            paths: &paths
              - path: /
                service:
                  identifier: zigbee2mqtt
                  port: http
        tls:
          - hosts:
              - *host
            secretName: wildcard-cert
music-assistant:
  app-template:
    ingress:
      music-assistant:
        annotations:
          hajimari.io/url: https://music-assistant.spencerslab.com
        hosts:
          - host: &host "music-assistant.spencerslab.com"
            paths: &paths
              - path: /
                service:
                  identifier: music-assistant
                  port: http
        tls:
          - hosts:
              - *host
            secretName: wildcard-cert
espresense:
  bitwardenIds:
    espresense: 1130d75e-e16c-428b-bf99-b15b0010e993
  app-template:
    ingress:
      espresense:
        annotations:
          hajimari.io/url: https://espresense.spencerslab.com
        hosts:
          - host: &host "espresense.spencerslab.com"
            paths: &paths
              - path: /
                service:
                  identifier: espresense
                  port: http
        tls:
          - hosts:
              - *host
            secretName: wildcard-cert
    persistence:
      config/espresense:
        accessMode: ReadWriteOnce
        enabled: true
        size: 1Gi
ledfx:
  app-template:
    ingress:
      ledfx:
        annotations:
          hajimari.io/url: https://ledfx.spencerslab.com
        hosts:
          - host: &host "ledfx.spencerslab.com"
            paths: &paths
              - path: /
                service:
                  identifier: ledfx
                  port: http
        tls:
          - hosts:
              - *host
            secretName: wildcard-cert
    persistence:
      config:
        existingClaim: ledfx
        advancedMounts:
          ledfx:
            main:
              - path: /app/ledfx-config/

logitech-media-server:
  app-template:
    controllers:
      logitech-media-server:
        containers:
          main:
            image:
              repository: toertel/logitech-media-server
              tag: v8.4.0-1@sha256:07dde462237c0618034c9d2db33967f5bc0db34544558e8edaac32ef0614555a
            env:
              AUDIO_DIR: &music /music
              PLAYLIST_DIR: &playlist /playlists
            resources:
              requests:
                memory: 256Mi
              limits:
                memory: 4096Mi
        #    securityContext:
        #      allowPrivilegeEscalation: false
        #      readOnlyRootFilesystem: true
        #      capabilities:
        #        drop:
        #          - ALL
        #pod:
        #  securityContext:
        #    runAsUser: 1000
        #    runAsGroup: 1000
        #    runAsNonRoot: true
        #    fsGroup: 1000
    ingress:
      espresense:
        annotations:
          hajimari.io/url: https://lms.spencerslab.com
        hosts:
          - host: &host "lms.spencerslab.com"
            paths: &paths
              - path: /
                service:
                  identifier: lms
                  port: http
        tls:
          - hosts:
              - *host
            secretName: wildcard-cert
    persistence:
      playlists:
        enabled: true
        existingClaim: lms-playlists
