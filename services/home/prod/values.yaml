testing: "work"
bitwarden-ids:
  zigbee2mqtt: 0164cfbc-dd85-43af-a4cc-b13f00108bde
controllers:
  main:
    containers:
      app:
        env:
          ZIGBEE2MQTT_DATA: /config
zigbee2mqtt:
  bitwarden-ids:
    zigbee2mqtt: 0164cfbc-dd85-43af-a4cc-b13f00108bde
  bitwardenIds:
    zigbee2mqtt: 0164cfbc-dd85-43af-a4cc-b13f00108bde
  app-template:
    controllers:
      zigbee2mqtt:
    #    annotations:
    #      reloader.stakater.com/auto: "true"
        containers:
          app:
            image:
              repository: ghcr.io/koenkk/zigbee2mqtt
              tag: 1.36.0@sha256:4de1ee53d67a9b4556045c34a2722bfd2348dabbefcb792e862643104d3e9fd0
            env:
              ZIGBEE2MQTT_DATA: "{{- tpl \"/config{{ .Values.testing }}\" $ }}"
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_DISCOVERY_TOPIC: homeassistant
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_LEGACY_ENTITY_ATTRIBUTES: false
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_LEGACY_TRIGGERS: false
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_HOMEASSISTANT_STATUS_TOPIC: homeassistant/status
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_LAST_SEEN: ISO_8601
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_LEGACY_API: false
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_LEGACY_AVAILABILITY_PAYLOAD: false
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_LOG_LEVEL: info # debug
  #          ZIGBEE2MQTT_CONFIG_ADVANCED_LOG_OUTPUT: '["console"]'
  #          ZIGBEE2MQTT_CONFIG_AVAILABILITY_ACTIVE_TIMEOUT: 60
  #          ZIGBEE2MQTT_CONFIG_AVAILABILITY_PASSIVE_TIMEOUT: 2000
  #          ZIGBEE2MQTT_CONFIG_DEVICE_OPTIONS_LEGACY: false
  #          ZIGBEE2MQTT_CONFIG_DEVICE_OPTIONS_RETAIN: true
  #          ZIGBEE2MQTT_CONFIG_EXPERIMENTAL_NEW_API: true
  #          ZIGBEE2MQTT_CONFIG_FRONTEND_PORT: &port 8080
  #          ZIGBEE2MQTT_CONFIG_FRONTEND_URL: https://zigbee2mqtt.spencerslab.com
  #          ZIGBEE2MQTT_CONFIG_HOMEASSISTANT: true
  #          ZIGBEE2MQTT_CONFIG_MQTT_INCLUDE_DEVICE_INFORMATION: true
  #          ZIGBEE2MQTT_CONFIG_MQTT_KEEPALIVE: 60
  #          ZIGBEE2MQTT_CONFIG_MQTT_REJECT_UNAUTHORIZED: true
  #          ZIGBEE2MQTT_CONFIG_MQTT_SERVER: mqtt://mosquitto.home.svc.cluster.local
  #          ZIGBEE2MQTT_CONFIG_MQTT_VERSION: 5
  #          ZIGBEE2MQTT_CONFIG_PERMIT_JOIN: false
  #          ZIGBEE2MQTT_CONFIG_SERIAL_BAUDRATE: 38400
  #          ZIGBEE2MQTT_CONFIG_SERIAL_DISABLE_LED: false
  #          ZIGBEE2MQTT_CONFIG_SERIAL_PORT: /dev/ttyACM0
  #          ZIGBEE2MQTT_CONFIG_SERIAL_ADAPTER: deconz
  #        envFrom:
  #          - secretRef:
  #              name: zigbee2mqtt-secret
  #        probes:
  #          liveness:
  #            enabled: true
  #          readiness:
  #            enabled: true
  #        resources:
  #          requests:
  #            cpu: 10m
  #          limits:
  #            smarter-devices/ttyACM0: 1
  #            memory: 256Mi
  #        securityContext:
  #          allowPrivilegeEscalation: false
  #          readOnlyRootFilesystem: true
  #          capabilities:
  #            drop:
  #              - ALL
  #    pod:
  #      #nodeSelector:
  #      #  phoscon.feature.node.kubernetes.io/conbee: "true"
  #      securityContext:
  #        runAsUser: 568
  #        runAsGroup: 568
  #        runAsNonRoot: true
  #        fsGroup: 568
  #        fsGroupChangePolicy: OnRootMismatch
  #        supplementalGroups:
  #          - 20
  #ingress:
  #  app:
  #    className: internal
  #    annotations:
  #      hajimari.io/icon: mdi:zigbee
  #      #hajimari.io/url: https://zigbee.${PUBLIC_DOMAIN}
  #      hajimari.io/url: https://zigbee2mqtt.spencerslab.com
  #    hosts:
  #      #- host: &host "{{ .Release.Name }}.${PUBLIC_DOMAIN}"
  #      - host: &host "zigbee2mqtt.spencerslab.com"
  #        paths: &paths
  #          - path: /
  #            service:
  #              identifier: app
  #              port: http
  #      - host: &customHost zigbee2mqtt.spencerslab.com
  #        paths: *paths
  #    tls:
  #      - hosts:
  #          - *host
  #          - *customHost
  #persistence:
  #  config:
  #    existingClaim: zigbee2mqtt
  #service:
  #  app:
  #    controller: zigbee2mqtt
  #    ports:
  #      http:
  #        port: *port

#zigbee2mqtt:
#  #nameOverride: "zigbee2mqtt"
#  fullnameOverride: "zigbee2mqtt"
#  statefulset:
#    storage:
#      storageClassName: local-path
#  additionalVolumeMounts:
#    - name: usb
#      mountPath: /dev/ttyUSB0
#
#  additionalVolumes:
#    - name: usb
#      hostPath:
#        path: /dev/ttyUSB0
#  
#  homeassistant:
#    enabled: true
#    # Optional: Home Assistant discovery topic (default: shown below)
#    # Note: should be different from [MQTT base topic](../mqtt.md) to prevent errors in HA software
#    discovery_topic: 'homeassistant'
#    # Optional: Home Assistant status topic (default: shown below)
#    # Note: in addition to the `status_topic`, 'homeassistant/status' will also be used
#    status_topic: 'hass/status'
#    # Optional: Home Assistant legacy entity attributes, (default: shown below), when enabled:
#    # Zigbee2MQTT will send additional states as attributes with each entity. For example,
#    # A temperature & humidity sensor will have 2 entities for the temperature and
#    # humidity, with this setting enabled both entities will also have
#    # an temperature and humidity attribute.
#    # Note: Disabling this option, requires a Home Assistant restart
#    #legacy_entity_attributes: true
#    # Optional: Home Assistant legacy triggers (default: shown below), when enabled:
#    # - Zigbee2mqt will send an empty 'action' or 'click' after one has been send
#    # - A 'sensor_action' and 'sensor_click' will be discoverd
#    #legacy_triggers: true
#
#  permit_join: true
#  timezone: MST
#  frontend:
#    url: http://0.0.0.0:8080
#  mqtt:
#    base_topic: zigbee2mqtt
#    server: mqtt://home.spencerslab.com
#    user: "zigbee2mqtt"
#    #password: "test"
#  serial:
#    port: /dev/ttyUSB0
#    #baudrate: 115200
#    #adapter: ezsp
#    #disable_led: false
#    #rtscts: false
#  #advanced:
#  #  transmit_power: 20
#  #  homeassistant_legacy_entity_attributes: false
#  #  legacy_api: false
#  #  legacy_availability_payload: false
#  #  log_level: debug
#  #  channel: 25
